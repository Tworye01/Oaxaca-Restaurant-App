<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Source: huffman.go in package github.com/andybalholm/brotli</title>
<link href="../../../../css/dark-v0.6.8.css" rel="stylesheet">
<script src="../../../../jvs/golds-v0.6.8.js"></script>
<body onload="onPageLoad()"><div>

<pre id="header"><code><span class="title">Source File</span>
	huffman.go

<span class="title">Belonging Package</span>
	<a href="../../../../pkg/github.com/andybalholm/brotli.html">github.com/andybalholm/brotli</a>
</code></pre>

<pre class="line-numbers">
<span class="codeline" id="line-1"><code>package brotli</code></span>
<span class="codeline" id="line-2"><code></code></span>
<span class="codeline" id="line-3"><code>/* Copyright 2013 Google Inc. All Rights Reserved.</code></span>
<span class="codeline" id="line-4"><code></code></span>
<span class="codeline" id="line-5"><code>   Distributed under MIT license.</code></span>
<span class="codeline" id="line-6"><code>   See file LICENSE for detail or copy at https://opensource.org/licenses/MIT</code></span>
<span class="codeline" id="line-7"><code>*/</code></span>
<span class="codeline" id="line-8"><code></code></span>
<span class="codeline" id="line-9"><code>/* Utilities for building Huffman decoding tables. */</code></span>
<span class="codeline" id="line-10"><code></code></span>
<span class="codeline" id="line-11"><code>const huffmanMaxCodeLength = 15</code></span>
<span class="codeline" id="line-12"><code></code></span>
<span class="codeline" id="line-13"><code>/* Maximum possible Huffman table size for an alphabet size of (index * 32),</code></span>
<span class="codeline" id="line-14"><code>   max code length 15 and root table bits 8. */</code></span>
<span class="codeline" id="line-15"><code>var kMaxHuffmanTableSize = []uint16{</code></span>
<span class="codeline" id="line-16"><code>	256,</code></span>
<span class="codeline" id="line-17"><code>	402,</code></span>
<span class="codeline" id="line-18"><code>	436,</code></span>
<span class="codeline" id="line-19"><code>	468,</code></span>
<span class="codeline" id="line-20"><code>	500,</code></span>
<span class="codeline" id="line-21"><code>	534,</code></span>
<span class="codeline" id="line-22"><code>	566,</code></span>
<span class="codeline" id="line-23"><code>	598,</code></span>
<span class="codeline" id="line-24"><code>	630,</code></span>
<span class="codeline" id="line-25"><code>	662,</code></span>
<span class="codeline" id="line-26"><code>	694,</code></span>
<span class="codeline" id="line-27"><code>	726,</code></span>
<span class="codeline" id="line-28"><code>	758,</code></span>
<span class="codeline" id="line-29"><code>	790,</code></span>
<span class="codeline" id="line-30"><code>	822,</code></span>
<span class="codeline" id="line-31"><code>	854,</code></span>
<span class="codeline" id="line-32"><code>	886,</code></span>
<span class="codeline" id="line-33"><code>	920,</code></span>
<span class="codeline" id="line-34"><code>	952,</code></span>
<span class="codeline" id="line-35"><code>	984,</code></span>
<span class="codeline" id="line-36"><code>	1016,</code></span>
<span class="codeline" id="line-37"><code>	1048,</code></span>
<span class="codeline" id="line-38"><code>	1080,</code></span>
<span class="codeline" id="line-39"><code>	1112,</code></span>
<span class="codeline" id="line-40"><code>	1144,</code></span>
<span class="codeline" id="line-41"><code>	1176,</code></span>
<span class="codeline" id="line-42"><code>	1208,</code></span>
<span class="codeline" id="line-43"><code>	1240,</code></span>
<span class="codeline" id="line-44"><code>	1272,</code></span>
<span class="codeline" id="line-45"><code>	1304,</code></span>
<span class="codeline" id="line-46"><code>	1336,</code></span>
<span class="codeline" id="line-47"><code>	1368,</code></span>
<span class="codeline" id="line-48"><code>	1400,</code></span>
<span class="codeline" id="line-49"><code>	1432,</code></span>
<span class="codeline" id="line-50"><code>	1464,</code></span>
<span class="codeline" id="line-51"><code>	1496,</code></span>
<span class="codeline" id="line-52"><code>	1528,</code></span>
<span class="codeline" id="line-53"><code>}</code></span>
<span class="codeline" id="line-54"><code></code></span>
<span class="codeline" id="line-55"><code>/* BROTLI_NUM_BLOCK_LEN_SYMBOLS == 26 */</code></span>
<span class="codeline" id="line-56"><code>const huffmanMaxSize26 = 396</code></span>
<span class="codeline" id="line-57"><code></code></span>
<span class="codeline" id="line-58"><code>/* BROTLI_MAX_BLOCK_TYPE_SYMBOLS == 258 */</code></span>
<span class="codeline" id="line-59"><code>const huffmanMaxSize258 = 632</code></span>
<span class="codeline" id="line-60"><code></code></span>
<span class="codeline" id="line-61"><code>/* BROTLI_MAX_CONTEXT_MAP_SYMBOLS == 272 */</code></span>
<span class="codeline" id="line-62"><code>const huffmanMaxSize272 = 646</code></span>
<span class="codeline" id="line-63"><code></code></span>
<span class="codeline" id="line-64"><code>const huffmanMaxCodeLengthCodeLength = 5</code></span>
<span class="codeline" id="line-65"><code></code></span>
<span class="codeline" id="line-66"><code>/* Do not create this struct directly - use the ConstructHuffmanCode</code></span>
<span class="codeline" id="line-67"><code> * constructor below! */</code></span>
<span class="codeline" id="line-68"><code>type huffmanCode struct {</code></span>
<span class="codeline" id="line-69"><code>	bits  byte</code></span>
<span class="codeline" id="line-70"><code>	value uint16</code></span>
<span class="codeline" id="line-71"><code>}</code></span>
<span class="codeline" id="line-72"><code></code></span>
<span class="codeline" id="line-73"><code>func constructHuffmanCode(bits byte, value uint16) huffmanCode {</code></span>
<span class="codeline" id="line-74"><code>	var h huffmanCode</code></span>
<span class="codeline" id="line-75"><code>	h.bits = bits</code></span>
<span class="codeline" id="line-76"><code>	h.value = value</code></span>
<span class="codeline" id="line-77"><code>	return h</code></span>
<span class="codeline" id="line-78"><code>}</code></span>
<span class="codeline" id="line-79"><code></code></span>
<span class="codeline" id="line-80"><code>/* Builds Huffman lookup table assuming code lengths are in symbol order. */</code></span>
<span class="codeline" id="line-81"><code></code></span>
<span class="codeline" id="line-82"><code>/* Builds Huffman lookup table assuming code lengths are in symbol order.</code></span>
<span class="codeline" id="line-83"><code>   Returns size of resulting table. */</code></span>
<span class="codeline" id="line-84"><code></code></span>
<span class="codeline" id="line-85"><code>/* Builds a simple Huffman table. The |num_symbols| parameter is to be</code></span>
<span class="codeline" id="line-86"><code>   interpreted as follows: 0 means 1 symbol, 1 means 2 symbols,</code></span>
<span class="codeline" id="line-87"><code>   2 means 3 symbols, 3 means 4 symbols with lengths [2, 2, 2, 2],</code></span>
<span class="codeline" id="line-88"><code>   4 means 4 symbols with lengths [1, 2, 3, 3]. */</code></span>
<span class="codeline" id="line-89"><code></code></span>
<span class="codeline" id="line-90"><code>/* Contains a collection of Huffman trees with the same alphabet size. */</code></span>
<span class="codeline" id="line-91"><code>/* max_symbol is needed due to simple codes since log2(alphabet_size) could be</code></span>
<span class="codeline" id="line-92"><code>   greater than log2(max_symbol). */</code></span>
<span class="codeline" id="line-93"><code>type huffmanTreeGroup struct {</code></span>
<span class="codeline" id="line-94"><code>	htrees        [][]huffmanCode</code></span>
<span class="codeline" id="line-95"><code>	codes         []huffmanCode</code></span>
<span class="codeline" id="line-96"><code>	alphabet_size uint16</code></span>
<span class="codeline" id="line-97"><code>	max_symbol    uint16</code></span>
<span class="codeline" id="line-98"><code>	num_htrees    uint16</code></span>
<span class="codeline" id="line-99"><code>}</code></span>
<span class="codeline" id="line-100"><code></code></span>
<span class="codeline" id="line-101"><code>const reverseBitsMax = 8</code></span>
<span class="codeline" id="line-102"><code></code></span>
<span class="codeline" id="line-103"><code>const reverseBitsBase = 0</code></span>
<span class="codeline" id="line-104"><code></code></span>
<span class="codeline" id="line-105"><code>var kReverseBits = [1 &lt;&lt; reverseBitsMax]byte{</code></span>
<span class="codeline" id="line-106"><code>	0x00,</code></span>
<span class="codeline" id="line-107"><code>	0x80,</code></span>
<span class="codeline" id="line-108"><code>	0x40,</code></span>
<span class="codeline" id="line-109"><code>	0xC0,</code></span>
<span class="codeline" id="line-110"><code>	0x20,</code></span>
<span class="codeline" id="line-111"><code>	0xA0,</code></span>
<span class="codeline" id="line-112"><code>	0x60,</code></span>
<span class="codeline" id="line-113"><code>	0xE0,</code></span>
<span class="codeline" id="line-114"><code>	0x10,</code></span>
<span class="codeline" id="line-115"><code>	0x90,</code></span>
<span class="codeline" id="line-116"><code>	0x50,</code></span>
<span class="codeline" id="line-117"><code>	0xD0,</code></span>
<span class="codeline" id="line-118"><code>	0x30,</code></span>
<span class="codeline" id="line-119"><code>	0xB0,</code></span>
<span class="codeline" id="line-120"><code>	0x70,</code></span>
<span class="codeline" id="line-121"><code>	0xF0,</code></span>
<span class="codeline" id="line-122"><code>	0x08,</code></span>
<span class="codeline" id="line-123"><code>	0x88,</code></span>
<span class="codeline" id="line-124"><code>	0x48,</code></span>
<span class="codeline" id="line-125"><code>	0xC8,</code></span>
<span class="codeline" id="line-126"><code>	0x28,</code></span>
<span class="codeline" id="line-127"><code>	0xA8,</code></span>
<span class="codeline" id="line-128"><code>	0x68,</code></span>
<span class="codeline" id="line-129"><code>	0xE8,</code></span>
<span class="codeline" id="line-130"><code>	0x18,</code></span>
<span class="codeline" id="line-131"><code>	0x98,</code></span>
<span class="codeline" id="line-132"><code>	0x58,</code></span>
<span class="codeline" id="line-133"><code>	0xD8,</code></span>
<span class="codeline" id="line-134"><code>	0x38,</code></span>
<span class="codeline" id="line-135"><code>	0xB8,</code></span>
<span class="codeline" id="line-136"><code>	0x78,</code></span>
<span class="codeline" id="line-137"><code>	0xF8,</code></span>
<span class="codeline" id="line-138"><code>	0x04,</code></span>
<span class="codeline" id="line-139"><code>	0x84,</code></span>
<span class="codeline" id="line-140"><code>	0x44,</code></span>
<span class="codeline" id="line-141"><code>	0xC4,</code></span>
<span class="codeline" id="line-142"><code>	0x24,</code></span>
<span class="codeline" id="line-143"><code>	0xA4,</code></span>
<span class="codeline" id="line-144"><code>	0x64,</code></span>
<span class="codeline" id="line-145"><code>	0xE4,</code></span>
<span class="codeline" id="line-146"><code>	0x14,</code></span>
<span class="codeline" id="line-147"><code>	0x94,</code></span>
<span class="codeline" id="line-148"><code>	0x54,</code></span>
<span class="codeline" id="line-149"><code>	0xD4,</code></span>
<span class="codeline" id="line-150"><code>	0x34,</code></span>
<span class="codeline" id="line-151"><code>	0xB4,</code></span>
<span class="codeline" id="line-152"><code>	0x74,</code></span>
<span class="codeline" id="line-153"><code>	0xF4,</code></span>
<span class="codeline" id="line-154"><code>	0x0C,</code></span>
<span class="codeline" id="line-155"><code>	0x8C,</code></span>
<span class="codeline" id="line-156"><code>	0x4C,</code></span>
<span class="codeline" id="line-157"><code>	0xCC,</code></span>
<span class="codeline" id="line-158"><code>	0x2C,</code></span>
<span class="codeline" id="line-159"><code>	0xAC,</code></span>
<span class="codeline" id="line-160"><code>	0x6C,</code></span>
<span class="codeline" id="line-161"><code>	0xEC,</code></span>
<span class="codeline" id="line-162"><code>	0x1C,</code></span>
<span class="codeline" id="line-163"><code>	0x9C,</code></span>
<span class="codeline" id="line-164"><code>	0x5C,</code></span>
<span class="codeline" id="line-165"><code>	0xDC,</code></span>
<span class="codeline" id="line-166"><code>	0x3C,</code></span>
<span class="codeline" id="line-167"><code>	0xBC,</code></span>
<span class="codeline" id="line-168"><code>	0x7C,</code></span>
<span class="codeline" id="line-169"><code>	0xFC,</code></span>
<span class="codeline" id="line-170"><code>	0x02,</code></span>
<span class="codeline" id="line-171"><code>	0x82,</code></span>
<span class="codeline" id="line-172"><code>	0x42,</code></span>
<span class="codeline" id="line-173"><code>	0xC2,</code></span>
<span class="codeline" id="line-174"><code>	0x22,</code></span>
<span class="codeline" id="line-175"><code>	0xA2,</code></span>
<span class="codeline" id="line-176"><code>	0x62,</code></span>
<span class="codeline" id="line-177"><code>	0xE2,</code></span>
<span class="codeline" id="line-178"><code>	0x12,</code></span>
<span class="codeline" id="line-179"><code>	0x92,</code></span>
<span class="codeline" id="line-180"><code>	0x52,</code></span>
<span class="codeline" id="line-181"><code>	0xD2,</code></span>
<span class="codeline" id="line-182"><code>	0x32,</code></span>
<span class="codeline" id="line-183"><code>	0xB2,</code></span>
<span class="codeline" id="line-184"><code>	0x72,</code></span>
<span class="codeline" id="line-185"><code>	0xF2,</code></span>
<span class="codeline" id="line-186"><code>	0x0A,</code></span>
<span class="codeline" id="line-187"><code>	0x8A,</code></span>
<span class="codeline" id="line-188"><code>	0x4A,</code></span>
<span class="codeline" id="line-189"><code>	0xCA,</code></span>
<span class="codeline" id="line-190"><code>	0x2A,</code></span>
<span class="codeline" id="line-191"><code>	0xAA,</code></span>
<span class="codeline" id="line-192"><code>	0x6A,</code></span>
<span class="codeline" id="line-193"><code>	0xEA,</code></span>
<span class="codeline" id="line-194"><code>	0x1A,</code></span>
<span class="codeline" id="line-195"><code>	0x9A,</code></span>
<span class="codeline" id="line-196"><code>	0x5A,</code></span>
<span class="codeline" id="line-197"><code>	0xDA,</code></span>
<span class="codeline" id="line-198"><code>	0x3A,</code></span>
<span class="codeline" id="line-199"><code>	0xBA,</code></span>
<span class="codeline" id="line-200"><code>	0x7A,</code></span>
<span class="codeline" id="line-201"><code>	0xFA,</code></span>
<span class="codeline" id="line-202"><code>	0x06,</code></span>
<span class="codeline" id="line-203"><code>	0x86,</code></span>
<span class="codeline" id="line-204"><code>	0x46,</code></span>
<span class="codeline" id="line-205"><code>	0xC6,</code></span>
<span class="codeline" id="line-206"><code>	0x26,</code></span>
<span class="codeline" id="line-207"><code>	0xA6,</code></span>
<span class="codeline" id="line-208"><code>	0x66,</code></span>
<span class="codeline" id="line-209"><code>	0xE6,</code></span>
<span class="codeline" id="line-210"><code>	0x16,</code></span>
<span class="codeline" id="line-211"><code>	0x96,</code></span>
<span class="codeline" id="line-212"><code>	0x56,</code></span>
<span class="codeline" id="line-213"><code>	0xD6,</code></span>
<span class="codeline" id="line-214"><code>	0x36,</code></span>
<span class="codeline" id="line-215"><code>	0xB6,</code></span>
<span class="codeline" id="line-216"><code>	0x76,</code></span>
<span class="codeline" id="line-217"><code>	0xF6,</code></span>
<span class="codeline" id="line-218"><code>	0x0E,</code></span>
<span class="codeline" id="line-219"><code>	0x8E,</code></span>
<span class="codeline" id="line-220"><code>	0x4E,</code></span>
<span class="codeline" id="line-221"><code>	0xCE,</code></span>
<span class="codeline" id="line-222"><code>	0x2E,</code></span>
<span class="codeline" id="line-223"><code>	0xAE,</code></span>
<span class="codeline" id="line-224"><code>	0x6E,</code></span>
<span class="codeline" id="line-225"><code>	0xEE,</code></span>
<span class="codeline" id="line-226"><code>	0x1E,</code></span>
<span class="codeline" id="line-227"><code>	0x9E,</code></span>
<span class="codeline" id="line-228"><code>	0x5E,</code></span>
<span class="codeline" id="line-229"><code>	0xDE,</code></span>
<span class="codeline" id="line-230"><code>	0x3E,</code></span>
<span class="codeline" id="line-231"><code>	0xBE,</code></span>
<span class="codeline" id="line-232"><code>	0x7E,</code></span>
<span class="codeline" id="line-233"><code>	0xFE,</code></span>
<span class="codeline" id="line-234"><code>	0x01,</code></span>
<span class="codeline" id="line-235"><code>	0x81,</code></span>
<span class="codeline" id="line-236"><code>	0x41,</code></span>
<span class="codeline" id="line-237"><code>	0xC1,</code></span>
<span class="codeline" id="line-238"><code>	0x21,</code></span>
<span class="codeline" id="line-239"><code>	0xA1,</code></span>
<span class="codeline" id="line-240"><code>	0x61,</code></span>
<span class="codeline" id="line-241"><code>	0xE1,</code></span>
<span class="codeline" id="line-242"><code>	0x11,</code></span>
<span class="codeline" id="line-243"><code>	0x91,</code></span>
<span class="codeline" id="line-244"><code>	0x51,</code></span>
<span class="codeline" id="line-245"><code>	0xD1,</code></span>
<span class="codeline" id="line-246"><code>	0x31,</code></span>
<span class="codeline" id="line-247"><code>	0xB1,</code></span>
<span class="codeline" id="line-248"><code>	0x71,</code></span>
<span class="codeline" id="line-249"><code>	0xF1,</code></span>
<span class="codeline" id="line-250"><code>	0x09,</code></span>
<span class="codeline" id="line-251"><code>	0x89,</code></span>
<span class="codeline" id="line-252"><code>	0x49,</code></span>
<span class="codeline" id="line-253"><code>	0xC9,</code></span>
<span class="codeline" id="line-254"><code>	0x29,</code></span>
<span class="codeline" id="line-255"><code>	0xA9,</code></span>
<span class="codeline" id="line-256"><code>	0x69,</code></span>
<span class="codeline" id="line-257"><code>	0xE9,</code></span>
<span class="codeline" id="line-258"><code>	0x19,</code></span>
<span class="codeline" id="line-259"><code>	0x99,</code></span>
<span class="codeline" id="line-260"><code>	0x59,</code></span>
<span class="codeline" id="line-261"><code>	0xD9,</code></span>
<span class="codeline" id="line-262"><code>	0x39,</code></span>
<span class="codeline" id="line-263"><code>	0xB9,</code></span>
<span class="codeline" id="line-264"><code>	0x79,</code></span>
<span class="codeline" id="line-265"><code>	0xF9,</code></span>
<span class="codeline" id="line-266"><code>	0x05,</code></span>
<span class="codeline" id="line-267"><code>	0x85,</code></span>
<span class="codeline" id="line-268"><code>	0x45,</code></span>
<span class="codeline" id="line-269"><code>	0xC5,</code></span>
<span class="codeline" id="line-270"><code>	0x25,</code></span>
<span class="codeline" id="line-271"><code>	0xA5,</code></span>
<span class="codeline" id="line-272"><code>	0x65,</code></span>
<span class="codeline" id="line-273"><code>	0xE5,</code></span>
<span class="codeline" id="line-274"><code>	0x15,</code></span>
<span class="codeline" id="line-275"><code>	0x95,</code></span>
<span class="codeline" id="line-276"><code>	0x55,</code></span>
<span class="codeline" id="line-277"><code>	0xD5,</code></span>
<span class="codeline" id="line-278"><code>	0x35,</code></span>
<span class="codeline" id="line-279"><code>	0xB5,</code></span>
<span class="codeline" id="line-280"><code>	0x75,</code></span>
<span class="codeline" id="line-281"><code>	0xF5,</code></span>
<span class="codeline" id="line-282"><code>	0x0D,</code></span>
<span class="codeline" id="line-283"><code>	0x8D,</code></span>
<span class="codeline" id="line-284"><code>	0x4D,</code></span>
<span class="codeline" id="line-285"><code>	0xCD,</code></span>
<span class="codeline" id="line-286"><code>	0x2D,</code></span>
<span class="codeline" id="line-287"><code>	0xAD,</code></span>
<span class="codeline" id="line-288"><code>	0x6D,</code></span>
<span class="codeline" id="line-289"><code>	0xED,</code></span>
<span class="codeline" id="line-290"><code>	0x1D,</code></span>
<span class="codeline" id="line-291"><code>	0x9D,</code></span>
<span class="codeline" id="line-292"><code>	0x5D,</code></span>
<span class="codeline" id="line-293"><code>	0xDD,</code></span>
<span class="codeline" id="line-294"><code>	0x3D,</code></span>
<span class="codeline" id="line-295"><code>	0xBD,</code></span>
<span class="codeline" id="line-296"><code>	0x7D,</code></span>
<span class="codeline" id="line-297"><code>	0xFD,</code></span>
<span class="codeline" id="line-298"><code>	0x03,</code></span>
<span class="codeline" id="line-299"><code>	0x83,</code></span>
<span class="codeline" id="line-300"><code>	0x43,</code></span>
<span class="codeline" id="line-301"><code>	0xC3,</code></span>
<span class="codeline" id="line-302"><code>	0x23,</code></span>
<span class="codeline" id="line-303"><code>	0xA3,</code></span>
<span class="codeline" id="line-304"><code>	0x63,</code></span>
<span class="codeline" id="line-305"><code>	0xE3,</code></span>
<span class="codeline" id="line-306"><code>	0x13,</code></span>
<span class="codeline" id="line-307"><code>	0x93,</code></span>
<span class="codeline" id="line-308"><code>	0x53,</code></span>
<span class="codeline" id="line-309"><code>	0xD3,</code></span>
<span class="codeline" id="line-310"><code>	0x33,</code></span>
<span class="codeline" id="line-311"><code>	0xB3,</code></span>
<span class="codeline" id="line-312"><code>	0x73,</code></span>
<span class="codeline" id="line-313"><code>	0xF3,</code></span>
<span class="codeline" id="line-314"><code>	0x0B,</code></span>
<span class="codeline" id="line-315"><code>	0x8B,</code></span>
<span class="codeline" id="line-316"><code>	0x4B,</code></span>
<span class="codeline" id="line-317"><code>	0xCB,</code></span>
<span class="codeline" id="line-318"><code>	0x2B,</code></span>
<span class="codeline" id="line-319"><code>	0xAB,</code></span>
<span class="codeline" id="line-320"><code>	0x6B,</code></span>
<span class="codeline" id="line-321"><code>	0xEB,</code></span>
<span class="codeline" id="line-322"><code>	0x1B,</code></span>
<span class="codeline" id="line-323"><code>	0x9B,</code></span>
<span class="codeline" id="line-324"><code>	0x5B,</code></span>
<span class="codeline" id="line-325"><code>	0xDB,</code></span>
<span class="codeline" id="line-326"><code>	0x3B,</code></span>
<span class="codeline" id="line-327"><code>	0xBB,</code></span>
<span class="codeline" id="line-328"><code>	0x7B,</code></span>
<span class="codeline" id="line-329"><code>	0xFB,</code></span>
<span class="codeline" id="line-330"><code>	0x07,</code></span>
<span class="codeline" id="line-331"><code>	0x87,</code></span>
<span class="codeline" id="line-332"><code>	0x47,</code></span>
<span class="codeline" id="line-333"><code>	0xC7,</code></span>
<span class="codeline" id="line-334"><code>	0x27,</code></span>
<span class="codeline" id="line-335"><code>	0xA7,</code></span>
<span class="codeline" id="line-336"><code>	0x67,</code></span>
<span class="codeline" id="line-337"><code>	0xE7,</code></span>
<span class="codeline" id="line-338"><code>	0x17,</code></span>
<span class="codeline" id="line-339"><code>	0x97,</code></span>
<span class="codeline" id="line-340"><code>	0x57,</code></span>
<span class="codeline" id="line-341"><code>	0xD7,</code></span>
<span class="codeline" id="line-342"><code>	0x37,</code></span>
<span class="codeline" id="line-343"><code>	0xB7,</code></span>
<span class="codeline" id="line-344"><code>	0x77,</code></span>
<span class="codeline" id="line-345"><code>	0xF7,</code></span>
<span class="codeline" id="line-346"><code>	0x0F,</code></span>
<span class="codeline" id="line-347"><code>	0x8F,</code></span>
<span class="codeline" id="line-348"><code>	0x4F,</code></span>
<span class="codeline" id="line-349"><code>	0xCF,</code></span>
<span class="codeline" id="line-350"><code>	0x2F,</code></span>
<span class="codeline" id="line-351"><code>	0xAF,</code></span>
<span class="codeline" id="line-352"><code>	0x6F,</code></span>
<span class="codeline" id="line-353"><code>	0xEF,</code></span>
<span class="codeline" id="line-354"><code>	0x1F,</code></span>
<span class="codeline" id="line-355"><code>	0x9F,</code></span>
<span class="codeline" id="line-356"><code>	0x5F,</code></span>
<span class="codeline" id="line-357"><code>	0xDF,</code></span>
<span class="codeline" id="line-358"><code>	0x3F,</code></span>
<span class="codeline" id="line-359"><code>	0xBF,</code></span>
<span class="codeline" id="line-360"><code>	0x7F,</code></span>
<span class="codeline" id="line-361"><code>	0xFF,</code></span>
<span class="codeline" id="line-362"><code>}</code></span>
<span class="codeline" id="line-363"><code></code></span>
<span class="codeline" id="line-364"><code>const reverseBitsLowest = (uint64(1) &lt;&lt; (reverseBitsMax - 1 + reverseBitsBase))</code></span>
<span class="codeline" id="line-365"><code></code></span>
<span class="codeline" id="line-366"><code>/* Returns reverse(num &gt;&gt; BROTLI_REVERSE_BITS_BASE, BROTLI_REVERSE_BITS_MAX),</code></span>
<span class="codeline" id="line-367"><code>   where reverse(value, len) is the bit-wise reversal of the len least</code></span>
<span class="codeline" id="line-368"><code>   significant bits of value. */</code></span>
<span class="codeline" id="line-369"><code>func reverseBits8(num uint64) uint64 {</code></span>
<span class="codeline" id="line-370"><code>	return uint64(kReverseBits[num])</code></span>
<span class="codeline" id="line-371"><code>}</code></span>
<span class="codeline" id="line-372"><code></code></span>
<span class="codeline" id="line-373"><code>/* Stores code in table[0], table[step], table[2*step], ..., table[end] */</code></span>
<span class="codeline" id="line-374"><code>/* Assumes that end is an integer multiple of step */</code></span>
<span class="codeline" id="line-375"><code>func replicateValue(table []huffmanCode, step int, end int, code huffmanCode) {</code></span>
<span class="codeline" id="line-376"><code>	for {</code></span>
<span class="codeline" id="line-377"><code>		end -= step</code></span>
<span class="codeline" id="line-378"><code>		table[end] = code</code></span>
<span class="codeline" id="line-379"><code>		if end &lt;= 0 {</code></span>
<span class="codeline" id="line-380"><code>			break</code></span>
<span class="codeline" id="line-381"><code>		}</code></span>
<span class="codeline" id="line-382"><code>	}</code></span>
<span class="codeline" id="line-383"><code>}</code></span>
<span class="codeline" id="line-384"><code></code></span>
<span class="codeline" id="line-385"><code>/* Returns the table width of the next 2nd level table. |count| is the histogram</code></span>
<span class="codeline" id="line-386"><code>   of bit lengths for the remaining symbols, |len| is the code length of the</code></span>
<span class="codeline" id="line-387"><code>   next processed symbol. */</code></span>
<span class="codeline" id="line-388"><code>func nextTableBitSize(count []uint16, len int, root_bits int) int {</code></span>
<span class="codeline" id="line-389"><code>	var left int = 1 &lt;&lt; uint(len-root_bits)</code></span>
<span class="codeline" id="line-390"><code>	for len &lt; huffmanMaxCodeLength {</code></span>
<span class="codeline" id="line-391"><code>		left -= int(count[len])</code></span>
<span class="codeline" id="line-392"><code>		if left &lt;= 0 {</code></span>
<span class="codeline" id="line-393"><code>			break</code></span>
<span class="codeline" id="line-394"><code>		}</code></span>
<span class="codeline" id="line-395"><code>		len++</code></span>
<span class="codeline" id="line-396"><code>		left &lt;&lt;= 1</code></span>
<span class="codeline" id="line-397"><code>	}</code></span>
<span class="codeline" id="line-398"><code></code></span>
<span class="codeline" id="line-399"><code>	return len - root_bits</code></span>
<span class="codeline" id="line-400"><code>}</code></span>
<span class="codeline" id="line-401"><code></code></span>
<span class="codeline" id="line-402"><code>func buildCodeLengthsHuffmanTable(table []huffmanCode, code_lengths []byte, count []uint16) {</code></span>
<span class="codeline" id="line-403"><code>	var code huffmanCode /* current table entry */ /* symbol index in original or sorted table */ /* prefix code */ /* prefix code addend */ /* step size to replicate values in current table */ /* size of current table */ /* symbols sorted by code length */</code></span>
<span class="codeline" id="line-404"><code>	var symbol int</code></span>
<span class="codeline" id="line-405"><code>	var key uint64</code></span>
<span class="codeline" id="line-406"><code>	var key_step uint64</code></span>
<span class="codeline" id="line-407"><code>	var step int</code></span>
<span class="codeline" id="line-408"><code>	var table_size int</code></span>
<span class="codeline" id="line-409"><code>	var sorted [codeLengthCodes]int</code></span>
<span class="codeline" id="line-410"><code>	var offset [huffmanMaxCodeLengthCodeLength + 1]int</code></span>
<span class="codeline" id="line-411"><code>	var bits int</code></span>
<span class="codeline" id="line-412"><code>	var bits_count int</code></span>
<span class="codeline" id="line-413"><code>	/* offsets in sorted table for each length */</code></span>
<span class="codeline" id="line-414"><code>	assert(huffmanMaxCodeLengthCodeLength &lt;= reverseBitsMax)</code></span>
<span class="codeline" id="line-415"><code></code></span>
<span class="codeline" id="line-416"><code>	/* Generate offsets into sorted symbol table by code length. */</code></span>
<span class="codeline" id="line-417"><code>	symbol = -1</code></span>
<span class="codeline" id="line-418"><code></code></span>
<span class="codeline" id="line-419"><code>	bits = 1</code></span>
<span class="codeline" id="line-420"><code>	var i int</code></span>
<span class="codeline" id="line-421"><code>	for i = 0; i &lt; huffmanMaxCodeLengthCodeLength; i++ {</code></span>
<span class="codeline" id="line-422"><code>		symbol += int(count[bits])</code></span>
<span class="codeline" id="line-423"><code>		offset[bits] = symbol</code></span>
<span class="codeline" id="line-424"><code>		bits++</code></span>
<span class="codeline" id="line-425"><code>	}</code></span>
<span class="codeline" id="line-426"><code></code></span>
<span class="codeline" id="line-427"><code>	/* Symbols with code length 0 are placed after all other symbols. */</code></span>
<span class="codeline" id="line-428"><code>	offset[0] = codeLengthCodes - 1</code></span>
<span class="codeline" id="line-429"><code></code></span>
<span class="codeline" id="line-430"><code>	/* Sort symbols by length, by symbol order within each length. */</code></span>
<span class="codeline" id="line-431"><code>	symbol = codeLengthCodes</code></span>
<span class="codeline" id="line-432"><code></code></span>
<span class="codeline" id="line-433"><code>	for {</code></span>
<span class="codeline" id="line-434"><code>		var i int</code></span>
<span class="codeline" id="line-435"><code>		for i = 0; i &lt; 6; i++ {</code></span>
<span class="codeline" id="line-436"><code>			symbol--</code></span>
<span class="codeline" id="line-437"><code>			sorted[offset[code_lengths[symbol]]] = symbol</code></span>
<span class="codeline" id="line-438"><code>			offset[code_lengths[symbol]]--</code></span>
<span class="codeline" id="line-439"><code>		}</code></span>
<span class="codeline" id="line-440"><code>		if symbol == 0 {</code></span>
<span class="codeline" id="line-441"><code>			break</code></span>
<span class="codeline" id="line-442"><code>		}</code></span>
<span class="codeline" id="line-443"><code>	}</code></span>
<span class="codeline" id="line-444"><code></code></span>
<span class="codeline" id="line-445"><code>	table_size = 1 &lt;&lt; huffmanMaxCodeLengthCodeLength</code></span>
<span class="codeline" id="line-446"><code></code></span>
<span class="codeline" id="line-447"><code>	/* Special case: all symbols but one have 0 code length. */</code></span>
<span class="codeline" id="line-448"><code>	if offset[0] == 0 {</code></span>
<span class="codeline" id="line-449"><code>		code = constructHuffmanCode(0, uint16(sorted[0]))</code></span>
<span class="codeline" id="line-450"><code>		for key = 0; key &lt; uint64(table_size); key++ {</code></span>
<span class="codeline" id="line-451"><code>			table[key] = code</code></span>
<span class="codeline" id="line-452"><code>		}</code></span>
<span class="codeline" id="line-453"><code></code></span>
<span class="codeline" id="line-454"><code>		return</code></span>
<span class="codeline" id="line-455"><code>	}</code></span>
<span class="codeline" id="line-456"><code></code></span>
<span class="codeline" id="line-457"><code>	/* Fill in table. */</code></span>
<span class="codeline" id="line-458"><code>	key = 0</code></span>
<span class="codeline" id="line-459"><code></code></span>
<span class="codeline" id="line-460"><code>	key_step = reverseBitsLowest</code></span>
<span class="codeline" id="line-461"><code>	symbol = 0</code></span>
<span class="codeline" id="line-462"><code>	bits = 1</code></span>
<span class="codeline" id="line-463"><code>	step = 2</code></span>
<span class="codeline" id="line-464"><code>	for {</code></span>
<span class="codeline" id="line-465"><code>		for bits_count = int(count[bits]); bits_count != 0; bits_count-- {</code></span>
<span class="codeline" id="line-466"><code>			code = constructHuffmanCode(byte(bits), uint16(sorted[symbol]))</code></span>
<span class="codeline" id="line-467"><code>			symbol++</code></span>
<span class="codeline" id="line-468"><code>			replicateValue(table[reverseBits8(key):], step, table_size, code)</code></span>
<span class="codeline" id="line-469"><code>			key += key_step</code></span>
<span class="codeline" id="line-470"><code>		}</code></span>
<span class="codeline" id="line-471"><code></code></span>
<span class="codeline" id="line-472"><code>		step &lt;&lt;= 1</code></span>
<span class="codeline" id="line-473"><code>		key_step &gt;&gt;= 1</code></span>
<span class="codeline" id="line-474"><code>		bits++</code></span>
<span class="codeline" id="line-475"><code>		if bits &gt; huffmanMaxCodeLengthCodeLength {</code></span>
<span class="codeline" id="line-476"><code>			break</code></span>
<span class="codeline" id="line-477"><code>		}</code></span>
<span class="codeline" id="line-478"><code>	}</code></span>
<span class="codeline" id="line-479"><code>}</code></span>
<span class="codeline" id="line-480"><code></code></span>
<span class="codeline" id="line-481"><code>func buildHuffmanTable(root_table []huffmanCode, root_bits int, symbol_lists symbolList, count []uint16) uint32 {</code></span>
<span class="codeline" id="line-482"><code>	var code huffmanCode /* current table entry */ /* next available space in table */ /* current code length */ /* symbol index in original or sorted table */ /* prefix code */ /* prefix code addend */ /* 2nd level table prefix code */ /* 2nd level table prefix code addend */ /* step size to replicate values in current table */ /* key length of current table */ /* size of current table */ /* sum of root table size and 2nd level table sizes */</code></span>
<span class="codeline" id="line-483"><code>	var table []huffmanCode</code></span>
<span class="codeline" id="line-484"><code>	var len int</code></span>
<span class="codeline" id="line-485"><code>	var symbol int</code></span>
<span class="codeline" id="line-486"><code>	var key uint64</code></span>
<span class="codeline" id="line-487"><code>	var key_step uint64</code></span>
<span class="codeline" id="line-488"><code>	var sub_key uint64</code></span>
<span class="codeline" id="line-489"><code>	var sub_key_step uint64</code></span>
<span class="codeline" id="line-490"><code>	var step int</code></span>
<span class="codeline" id="line-491"><code>	var table_bits int</code></span>
<span class="codeline" id="line-492"><code>	var table_size int</code></span>
<span class="codeline" id="line-493"><code>	var total_size int</code></span>
<span class="codeline" id="line-494"><code>	var max_length int = -1</code></span>
<span class="codeline" id="line-495"><code>	var bits int</code></span>
<span class="codeline" id="line-496"><code>	var bits_count int</code></span>
<span class="codeline" id="line-497"><code></code></span>
<span class="codeline" id="line-498"><code>	assert(root_bits &lt;= reverseBitsMax)</code></span>
<span class="codeline" id="line-499"><code>	assert(huffmanMaxCodeLength-root_bits &lt;= reverseBitsMax)</code></span>
<span class="codeline" id="line-500"><code></code></span>
<span class="codeline" id="line-501"><code>	for symbolListGet(symbol_lists, max_length) == 0xFFFF {</code></span>
<span class="codeline" id="line-502"><code>		max_length--</code></span>
<span class="codeline" id="line-503"><code>	}</code></span>
<span class="codeline" id="line-504"><code>	max_length += huffmanMaxCodeLength + 1</code></span>
<span class="codeline" id="line-505"><code></code></span>
<span class="codeline" id="line-506"><code>	table = root_table</code></span>
<span class="codeline" id="line-507"><code>	table_bits = root_bits</code></span>
<span class="codeline" id="line-508"><code>	table_size = 1 &lt;&lt; uint(table_bits)</code></span>
<span class="codeline" id="line-509"><code>	total_size = table_size</code></span>
<span class="codeline" id="line-510"><code></code></span>
<span class="codeline" id="line-511"><code>	/* Fill in the root table. Reduce the table size to if possible,</code></span>
<span class="codeline" id="line-512"><code>	   and create the repetitions by memcpy. */</code></span>
<span class="codeline" id="line-513"><code>	if table_bits &gt; max_length {</code></span>
<span class="codeline" id="line-514"><code>		table_bits = max_length</code></span>
<span class="codeline" id="line-515"><code>		table_size = 1 &lt;&lt; uint(table_bits)</code></span>
<span class="codeline" id="line-516"><code>	}</code></span>
<span class="codeline" id="line-517"><code></code></span>
<span class="codeline" id="line-518"><code>	key = 0</code></span>
<span class="codeline" id="line-519"><code>	key_step = reverseBitsLowest</code></span>
<span class="codeline" id="line-520"><code>	bits = 1</code></span>
<span class="codeline" id="line-521"><code>	step = 2</code></span>
<span class="codeline" id="line-522"><code>	for {</code></span>
<span class="codeline" id="line-523"><code>		symbol = bits - (huffmanMaxCodeLength + 1)</code></span>
<span class="codeline" id="line-524"><code>		for bits_count = int(count[bits]); bits_count != 0; bits_count-- {</code></span>
<span class="codeline" id="line-525"><code>			symbol = int(symbolListGet(symbol_lists, symbol))</code></span>
<span class="codeline" id="line-526"><code>			code = constructHuffmanCode(byte(bits), uint16(symbol))</code></span>
<span class="codeline" id="line-527"><code>			replicateValue(table[reverseBits8(key):], step, table_size, code)</code></span>
<span class="codeline" id="line-528"><code>			key += key_step</code></span>
<span class="codeline" id="line-529"><code>		}</code></span>
<span class="codeline" id="line-530"><code></code></span>
<span class="codeline" id="line-531"><code>		step &lt;&lt;= 1</code></span>
<span class="codeline" id="line-532"><code>		key_step &gt;&gt;= 1</code></span>
<span class="codeline" id="line-533"><code>		bits++</code></span>
<span class="codeline" id="line-534"><code>		if bits &gt; table_bits {</code></span>
<span class="codeline" id="line-535"><code>			break</code></span>
<span class="codeline" id="line-536"><code>		}</code></span>
<span class="codeline" id="line-537"><code>	}</code></span>
<span class="codeline" id="line-538"><code></code></span>
<span class="codeline" id="line-539"><code>	/* If root_bits != table_bits then replicate to fill the remaining slots. */</code></span>
<span class="codeline" id="line-540"><code>	for total_size != table_size {</code></span>
<span class="codeline" id="line-541"><code>		copy(table[table_size:], table[:uint(table_size)])</code></span>
<span class="codeline" id="line-542"><code>		table_size &lt;&lt;= 1</code></span>
<span class="codeline" id="line-543"><code>	}</code></span>
<span class="codeline" id="line-544"><code></code></span>
<span class="codeline" id="line-545"><code>	/* Fill in 2nd level tables and add pointers to root table. */</code></span>
<span class="codeline" id="line-546"><code>	key_step = reverseBitsLowest &gt;&gt; uint(root_bits-1)</code></span>
<span class="codeline" id="line-547"><code></code></span>
<span class="codeline" id="line-548"><code>	sub_key = reverseBitsLowest &lt;&lt; 1</code></span>
<span class="codeline" id="line-549"><code>	sub_key_step = reverseBitsLowest</code></span>
<span class="codeline" id="line-550"><code>	len = root_bits + 1</code></span>
<span class="codeline" id="line-551"><code>	step = 2</code></span>
<span class="codeline" id="line-552"><code>	for ; len &lt;= max_length; len++ {</code></span>
<span class="codeline" id="line-553"><code>		symbol = len - (huffmanMaxCodeLength + 1)</code></span>
<span class="codeline" id="line-554"><code>		for ; count[len] != 0; count[len]-- {</code></span>
<span class="codeline" id="line-555"><code>			if sub_key == reverseBitsLowest&lt;&lt;1 {</code></span>
<span class="codeline" id="line-556"><code>				table = table[table_size:]</code></span>
<span class="codeline" id="line-557"><code>				table_bits = nextTableBitSize(count, int(len), root_bits)</code></span>
<span class="codeline" id="line-558"><code>				table_size = 1 &lt;&lt; uint(table_bits)</code></span>
<span class="codeline" id="line-559"><code>				total_size += table_size</code></span>
<span class="codeline" id="line-560"><code>				sub_key = reverseBits8(key)</code></span>
<span class="codeline" id="line-561"><code>				key += key_step</code></span>
<span class="codeline" id="line-562"><code>				root_table[sub_key] = constructHuffmanCode(byte(table_bits+root_bits), uint16(uint64(uint(-cap(table)+cap(root_table)))-sub_key))</code></span>
<span class="codeline" id="line-563"><code>				sub_key = 0</code></span>
<span class="codeline" id="line-564"><code>			}</code></span>
<span class="codeline" id="line-565"><code></code></span>
<span class="codeline" id="line-566"><code>			symbol = int(symbolListGet(symbol_lists, symbol))</code></span>
<span class="codeline" id="line-567"><code>			code = constructHuffmanCode(byte(len-root_bits), uint16(symbol))</code></span>
<span class="codeline" id="line-568"><code>			replicateValue(table[reverseBits8(sub_key):], step, table_size, code)</code></span>
<span class="codeline" id="line-569"><code>			sub_key += sub_key_step</code></span>
<span class="codeline" id="line-570"><code>		}</code></span>
<span class="codeline" id="line-571"><code></code></span>
<span class="codeline" id="line-572"><code>		step &lt;&lt;= 1</code></span>
<span class="codeline" id="line-573"><code>		sub_key_step &gt;&gt;= 1</code></span>
<span class="codeline" id="line-574"><code>	}</code></span>
<span class="codeline" id="line-575"><code></code></span>
<span class="codeline" id="line-576"><code>	return uint32(total_size)</code></span>
<span class="codeline" id="line-577"><code>}</code></span>
<span class="codeline" id="line-578"><code></code></span>
<span class="codeline" id="line-579"><code>func buildSimpleHuffmanTable(table []huffmanCode, root_bits int, val []uint16, num_symbols uint32) uint32 {</code></span>
<span class="codeline" id="line-580"><code>	var table_size uint32 = 1</code></span>
<span class="codeline" id="line-581"><code>	var goal_size uint32 = 1 &lt;&lt; uint(root_bits)</code></span>
<span class="codeline" id="line-582"><code>	switch num_symbols {</code></span>
<span class="codeline" id="line-583"><code>	case 0:</code></span>
<span class="codeline" id="line-584"><code>		table[0] = constructHuffmanCode(0, val[0])</code></span>
<span class="codeline" id="line-585"><code></code></span>
<span class="codeline" id="line-586"><code>	case 1:</code></span>
<span class="codeline" id="line-587"><code>		if val[1] &gt; val[0] {</code></span>
<span class="codeline" id="line-588"><code>			table[0] = constructHuffmanCode(1, val[0])</code></span>
<span class="codeline" id="line-589"><code>			table[1] = constructHuffmanCode(1, val[1])</code></span>
<span class="codeline" id="line-590"><code>		} else {</code></span>
<span class="codeline" id="line-591"><code>			table[0] = constructHuffmanCode(1, val[1])</code></span>
<span class="codeline" id="line-592"><code>			table[1] = constructHuffmanCode(1, val[0])</code></span>
<span class="codeline" id="line-593"><code>		}</code></span>
<span class="codeline" id="line-594"><code></code></span>
<span class="codeline" id="line-595"><code>		table_size = 2</code></span>
<span class="codeline" id="line-596"><code></code></span>
<span class="codeline" id="line-597"><code>	case 2:</code></span>
<span class="codeline" id="line-598"><code>		table[0] = constructHuffmanCode(1, val[0])</code></span>
<span class="codeline" id="line-599"><code>		table[2] = constructHuffmanCode(1, val[0])</code></span>
<span class="codeline" id="line-600"><code>		if val[2] &gt; val[1] {</code></span>
<span class="codeline" id="line-601"><code>			table[1] = constructHuffmanCode(2, val[1])</code></span>
<span class="codeline" id="line-602"><code>			table[3] = constructHuffmanCode(2, val[2])</code></span>
<span class="codeline" id="line-603"><code>		} else {</code></span>
<span class="codeline" id="line-604"><code>			table[1] = constructHuffmanCode(2, val[2])</code></span>
<span class="codeline" id="line-605"><code>			table[3] = constructHuffmanCode(2, val[1])</code></span>
<span class="codeline" id="line-606"><code>		}</code></span>
<span class="codeline" id="line-607"><code></code></span>
<span class="codeline" id="line-608"><code>		table_size = 4</code></span>
<span class="codeline" id="line-609"><code></code></span>
<span class="codeline" id="line-610"><code>	case 3:</code></span>
<span class="codeline" id="line-611"><code>		var i int</code></span>
<span class="codeline" id="line-612"><code>		var k int</code></span>
<span class="codeline" id="line-613"><code>		for i = 0; i &lt; 3; i++ {</code></span>
<span class="codeline" id="line-614"><code>			for k = i + 1; k &lt; 4; k++ {</code></span>
<span class="codeline" id="line-615"><code>				if val[k] &lt; val[i] {</code></span>
<span class="codeline" id="line-616"><code>					var t uint16 = val[k]</code></span>
<span class="codeline" id="line-617"><code>					val[k] = val[i]</code></span>
<span class="codeline" id="line-618"><code>					val[i] = t</code></span>
<span class="codeline" id="line-619"><code>				}</code></span>
<span class="codeline" id="line-620"><code>			}</code></span>
<span class="codeline" id="line-621"><code>		}</code></span>
<span class="codeline" id="line-622"><code></code></span>
<span class="codeline" id="line-623"><code>		table[0] = constructHuffmanCode(2, val[0])</code></span>
<span class="codeline" id="line-624"><code>		table[2] = constructHuffmanCode(2, val[1])</code></span>
<span class="codeline" id="line-625"><code>		table[1] = constructHuffmanCode(2, val[2])</code></span>
<span class="codeline" id="line-626"><code>		table[3] = constructHuffmanCode(2, val[3])</code></span>
<span class="codeline" id="line-627"><code>		table_size = 4</code></span>
<span class="codeline" id="line-628"><code></code></span>
<span class="codeline" id="line-629"><code>	case 4:</code></span>
<span class="codeline" id="line-630"><code>		if val[3] &lt; val[2] {</code></span>
<span class="codeline" id="line-631"><code>			var t uint16 = val[3]</code></span>
<span class="codeline" id="line-632"><code>			val[3] = val[2]</code></span>
<span class="codeline" id="line-633"><code>			val[2] = t</code></span>
<span class="codeline" id="line-634"><code>		}</code></span>
<span class="codeline" id="line-635"><code></code></span>
<span class="codeline" id="line-636"><code>		table[0] = constructHuffmanCode(1, val[0])</code></span>
<span class="codeline" id="line-637"><code>		table[1] = constructHuffmanCode(2, val[1])</code></span>
<span class="codeline" id="line-638"><code>		table[2] = constructHuffmanCode(1, val[0])</code></span>
<span class="codeline" id="line-639"><code>		table[3] = constructHuffmanCode(3, val[2])</code></span>
<span class="codeline" id="line-640"><code>		table[4] = constructHuffmanCode(1, val[0])</code></span>
<span class="codeline" id="line-641"><code>		table[5] = constructHuffmanCode(2, val[1])</code></span>
<span class="codeline" id="line-642"><code>		table[6] = constructHuffmanCode(1, val[0])</code></span>
<span class="codeline" id="line-643"><code>		table[7] = constructHuffmanCode(3, val[3])</code></span>
<span class="codeline" id="line-644"><code>		table_size = 8</code></span>
<span class="codeline" id="line-645"><code>	}</code></span>
<span class="codeline" id="line-646"><code></code></span>
<span class="codeline" id="line-647"><code>	for table_size != goal_size {</code></span>
<span class="codeline" id="line-648"><code>		copy(table[table_size:], table[:uint(table_size)])</code></span>
<span class="codeline" id="line-649"><code>		table_size &lt;&lt;= 1</code></span>
<span class="codeline" id="line-650"><code>	}</code></span>
<span class="codeline" id="line-651"><code></code></span>
<span class="codeline" id="line-652"><code>	return goal_size</code></span>
<span class="codeline" id="line-653"><code>}</code></span>
</pre><pre id="footer">
<table><tr><td><img src="../../../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/apps-and-libs/golds.html"><b>Golds</b></a> <i>v0.6.8</i>. (GOOS=linux GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>